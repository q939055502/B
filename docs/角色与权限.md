# 角色与权限使用指南

## 一、完整权限列表

以下是系统中所有可用的权限，按资源类型分类：

### 1.1 用户管理权限
- `user:view:own`：查看自己的用户信息
- `user:view:all`：查看所有用户信息
- `user:create`：创建新用户
- `user:edit:own`：编辑自己的用户信息
- `user:edit:all`：编辑所有用户信息
- `user:delete`：删除用户
- `user:export`：导出用户数据
- `user:role:manage`：管理用户角色

### 1.2 检测报告管理权限
- `inspection_report:view:own`：查看自己的检测报告
- `inspection_report:view:all`：查看所有检测报告
- `inspection_report:create`：创建检测报告
- `inspection_report:edit:own`：编辑自己的检测报告
- `inspection_report:edit:all`：编辑所有检测报告
- `inspection_report:delete:own`：删除自己的检测报告
- `inspection_report:delete:all`：删除所有检测报告
- `inspection_report:approve`：审批检测报告
- `inspection_report:export`：导出检测报告
- `inspection_report:print`：打印检测报告

### 1.3 系统管理权限
- `system:role:manage`：管理角色
- `system:permission:manage`：管理权限
- `system:config:edit`：编辑系统参数
- `system:log:view`：查看系统日志

## 二、权限使用说明

### 2.1 权限格式说明
权限采用三段式命名格式：`资源类型:操作:范围`，其中：
- 资源类型：表示权限适用的资源，如`user`（用户）、`inspection_report`（检测报告）
- 操作：表示对资源可以执行的操作，如`view`（查看）、`create`（创建）、`edit`（编辑）
- 范围：表示操作适用的范围，如`own`（自己的）、`all`（所有的）

### 2.2 权限继承规则
- 拥有`resource:action:all`权限的用户自动拥有`resource:action:own`权限
- 拥有`system:permission:manage`权限的用户可以分配任何权限给其他用户

## 三、角色管理

### 3.1 角色创建与删除
- 只有拥有`system:role:manage`权限的用户可以创建和删除角色
- 系统预定义的角色（管理员、审核者、编辑者、普通用户、访客）不能删除
- 创建新角色时必须为其分配至少一个权限

### 3.2 角色分配规则
- 一个用户可以拥有多个角色
- 用户的权限是其所有角色权限的并集
- 拥有`user:role:manage`权限的用户可以为其他用户分配角色

## 四、角色与权限对应关系

系统预定义了五种角色，每种角色拥有不同的权限集合：

### 4.1 管理员(admin)角色

拥有系统最高权限，包括：
- `user:view:all`：查看所有用户信息
- `user:edit:all`：编辑所有用户信息
- `user:create`：创建新用户
- `user:delete`：删除用户
- `user:role:manage`：管理用户角色
- `inspection_report:view:all`：查看所有检测报告
- `inspection_report:create`：创建检测报告
- `inspection_report:edit:all`：编辑所有检测报告
- `inspection_report:delete:all`：删除所有检测报告
- `inspection_report:approve`：审批检测报告
- `inspection_report:export`：导出检测报告
- `inspection_report:print`：打印检测报告
- `system:config:edit`：修改系统配置
- `system:role:manage`：管理角色
- `system:permission:manage`：管理权限
- `system:log:view`：查看系统日志

### 4.2 审核者(auditor)角色

拥有检测报告审核权限，包括：
- `user:view:own`：查看自己的用户信息
- `user:edit:own`：编辑自己的用户信息
- `inspection_report:view:all`：查看所有检测报告
- `inspection_report:approve`：审批检测报告
- `inspection_report:export`：导出检测报告

### 4.3 编辑者(editor)角色

拥有内容编辑权限，包括：
- `user:view:own`：查看自己的用户信息
- `user:edit:own`：编辑自己的用户信息
- `inspection_report:create`：创建检测报告
- `inspection_report:view:all`：查看所有检测报告
- `inspection_report:edit:all`：编辑所有检测报告
- `inspection_report:delete:all`：删除所有检测报告
- `inspection_report:export`：导出检测报告
- `inspection_report:print`：打印检测报告

### 4.4 普通用户(user)角色

拥有个人信息管理和检测报告操作权限，包括：
- `user:view:own`：查看自己的用户信息
- `user:edit:own`：编辑自己的用户信息
- `inspection_report:view:all`：查看所有检测报告
- `inspection_report:create`：创建检测报告
- `inspection_report:edit:own`：编辑自己的检测报告
- `inspection_report:delete:own`：删除自己的检测报告
- `inspection_report:export`：导出自己的检测报告

### 4.5 访客(viewer)角色

拥有只读权限，包括：
- `user:view:own`：查看自己用户信息
- `inspection_report:view:all`：查看所有检测报告

